webpackJsonp([78],{FfrS:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("mvHQ"),o=t.n(a),l={data:function(){return{formLabelAlign:{Title:"",Content:"",BeginTime:"",For:""},uploadFileUrlapp:"https://httpbin.org/post",imageUrlList:[],imgVideoBase64List:[],dialogVisibleMainGraph:!1,imageUrl:{}}},computed:{},watch:{},methods:{Good:function(){var e=this,i=JSON.parse(o()(this.formLabelAlign));i.For="内部员工"==i.For?1:"客户"==i.For?2:3,console.log(i);var t={api:"post",url:this.$store.state.http+"System/AddJournalism",data:i};this.$https(t).then(function(i){console.log(i),e.$emit("refresh"),e.$router.push({path:"./NewsListings"})})},beforeuploadMainGraph:function(e){var i=(e.size/1024/1024).toFixed(3);if(console.log(i+"MB"),console.log(e),i>10&&"video/mp4"==e.type)return this.$look("warning","提示！","视频文件大小不得超过10MB"),!1;var t=this,a=new FileReader;a.readAsDataURL(e),a.onload=function(i){var o=a.result;t.imgVideoBase64List.push({uid:e.uid,base64:o})}},handleSuccessMainGraph:function(e,i,t){this.imageUrlList=t,console.log(this.imgVideoBase64List)},UpImgLeng:function(){if(0==this.imgVideoBase64List.length)return!1;for(var e=0;e<this.imgVideoBase64List.length;e++){var i=this.imgVideoBase64List[e];this.Upimg(i)}this.imageUrlList=[],this.imgVideoBase64List=[]},Upimg:function(e){var i=this,t=e.base64.split("base64")[0];console.log(t.split("video/mp4").length);var a={api:"post",url:this.$store.state.http+"System/UploadJournalism",data:{FileStr:e.base64,Type:t.split("video/mp4").length}};this.$https(a).then(function(e){console.log(e.Data),1==e.Data.split("mp4").length?i.formLabelAlign.Content+="<img src='http://icms.inchwell.com.cn/file/Message/"+e.Data+"'> ":i.formLabelAlign.Content+="<video src='http://icms.inchwell.com.cn/file/Message/"+e.Data+'\' controls="controls"  >您的浏览器不支持 video 标签。</video> '})},handlePreviewMainGraph:function(e){this.imageUrl.type=e.raw.type,this.imageUrl.url=e.url,console.log(e),this.dialogVisibleMainGraph=!0},beforeremoveMainGraph:function(e,i){},handleRemoveMainGraph:function(e,i){console.log(e.uid);for(var t=0;t<this.imgVideoBase64List.length;t++){this.imgVideoBase64List[t].uid===e.uid&&this.imgVideoBase64List.splice(t,1)}console.log(this.imgVideoBase64List)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},s={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"box_s"},[t("div",{staticClass:"view"},[t("el-form",{attrs:{"label-width":"80px",model:e.formLabelAlign}},[t("el-form-item",{attrs:{label:"标题"}},[t("el-input",{attrs:{size:"mini"},model:{value:e.formLabelAlign.Title,callback:function(i){e.$set(e.formLabelAlign,"Title",i)},expression:"formLabelAlign.Title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"开始日期"}},[t("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.formLabelAlign.BeginTime,callback:function(i){e.$set(e.formLabelAlign,"BeginTime",i)},expression:"formLabelAlign.BeginTime"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"目标群体"}},[t("el-radio-group",{model:{value:e.formLabelAlign.For,callback:function(i){e.$set(e.formLabelAlign,"For",i)},expression:"formLabelAlign.For"}},[t("el-radio",{attrs:{label:"内部员工"}}),e._v(" "),t("el-radio",{attrs:{label:"客户"}}),e._v(" "),t("el-radio",{attrs:{label:"全部"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"内容"}},[t("el-input",{staticClass:"textarea",attrs:{type:"textarea",size:"mini",autosize:{minRows:2,maxRows:9999},placeholder:"请输入内容"},model:{value:e.formLabelAlign.Content,callback:function(i){e.$set(e.formLabelAlign,"Content",i)},expression:"formLabelAlign.Content"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上传"}},[t("el-upload",{attrs:{action:e.uploadFileUrlapp,data:{attachType:0},name:"appFile",limit:10,multiple:!0,accept:"image/*,video/*","before-upload":e.beforeuploadMainGraph,"on-success":e.handleSuccessMainGraph,"on-preview":e.handlePreviewMainGraph,"before-remove":e.beforeremoveMainGraph,"on-remove":e.handleRemoveMainGraph,"list-type":"picture-card","file-list":e.imageUrlList}},[t("i",{staticClass:"el-icon-plus spc1"})]),e._v(" "),t("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.UpImgLeng()}}},[e._v("上传")])],1)],1),e._v(" "),t("el-dialog",{staticClass:"spc12",attrs:{visible:e.dialogVisibleMainGraph,"modal-append-to-body":!1},on:{"update:visible":function(i){e.dialogVisibleMainGraph=i}}},["video/mp4"!=e.imageUrl.type?t("img",{attrs:{width:"100%",src:e.imageUrl.url,alt:""}}):e._e(),e._v(" "),"video/mp4"==e.imageUrl.type?t("video",{staticClass:"avatar video-avatar",attrs:{src:e.imageUrl.url,controls:"controls"}},[e._v("\n        您的浏览器不支持视频播放\n      ")]):e._e()]),e._v(" "),t("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.Good()}}},[e._v("添加")])],1),e._v(" "),t("div",{staticClass:"view_html"},[t("div",{staticClass:"iphone",domProps:{innerHTML:e._s(e.formLabelAlign.Content)}}),e._v(" "),t("div",{staticClass:"head"},[e._v(e._s(e.formLabelAlign.Title)+" ")])])])},staticRenderFns:[]};var n=t("VU/8")(l,s,!1,function(e){t("Tu3b")},"data-v-3fcb1fc2",null);i.default=n.exports},Tu3b:function(e,i){}});