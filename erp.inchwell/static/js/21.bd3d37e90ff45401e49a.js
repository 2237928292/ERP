webpackJsonp([21],{hTCv:function(t,e){},lGeq:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"",data:function(){return{Data:{},GoodsDH:"",GoosDtos:[],LogisticDtos:[]}},created:function(){this.init()},components:{},methods:{init:function(){var t=this,e={api:"get",url:this.$store.state.http+"Maintain/GetMSSO",data:{Id:this.$store.state.Vuex.Delivery}};this.$https(e).then(function(e){t.Data=e.Data.Dto,t.GoosDtos=e.Data.Dto.GoosDtos,t.LogisticDtos=e.Data.Dto.LogisticDtos;for(var o=0;o<t.GoosDtos.length;o++){var s=t.GoosDtos[o];t.$set(s,"index","")}console.log("-------------------------");for(var i=[],a=0;a<t.LogisticDtos.length;a++)i.push(t.LogisticDtos[a].LogisticGoodDtos);console.log(i);for(var n=0;n<i.length;n++)for(var l=i[n],r="Number"+n,c=0;c<l.length;c++)for(var d=l[c],u=0;u<t.GoosDtos.length;u++){var v=t.GoosDtos[u].ProductId;d.ProductId==v&&(t.GoosDtos[u][r]=d.Quantity)}})},NumberIndex:function(t){return"Number"+t},DeliverysHttp:function(t){console.log(t);var e=this.LogisticDtos[t].LogisticInfo;console.log(e.split(0,2)),window.open("https://www.sf-express.com/cn/sc/dynamic_function/waybill/#search/bill-number/"+e,"_blank")},deliverGoods:function(){var t=this;if(""==this.GoodsDH)return this.$look("warning","请输入物流信息！"),!1;for(var e=[],o=this.GoosDtos.length,s=0;s<this.GoosDtos.length;s++){var i=this.GoosDtos[s];e.push({ProductId:i.ProductId,Quantity:i.index}),""!=i.index&&0!=i.index||(o-=1)}if(0==o)return this.$look("warning","请输入发货数量！"),!1;var a={api:"post",url:this.$store.state.http+"Maintain/SendMSSO",data:{MaintainSuppliesSOId:this.$store.state.Vuex.Delivery,LogisticInfo:this.GoodsDH,Goods:e}};this.$https(a).then(function(e){return console.log(e.Data),t.init(),t.$look("success","发货成功！"),!1})}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box_s"},[o("div",{staticClass:"segmentation"},[t._v("基础信息")]),t._v(" "),o("div",{staticClass:"text itemxxxxX"},[o("p",[o("span",[t._v("客户:")]),t._v("\n      "+t._s(t.Data.CusFullName)+"\n    ")])]),t._v(" "),o("div",{staticClass:"text itemxxxxx"},[o("p",[o("span",[t._v("合同号:")]),t._v("\n      "+t._s(t.Data.ContractCode)+"\n    ")])]),t._v(" "),o("div",{staticClass:"text itemxxxxx"},[o("p",[o("span",[t._v("任务单号:")]),t._v("\n      "+t._s(t.Data.OrderCode)+"\n    ")])]),t._v(" "),o("div",{staticClass:"text itemxxxxx"},[o("p",[o("span",[t._v("区域:")]),t._v("\n      "+t._s(t.Data.Area)+"\n    ")])]),t._v(" "),o("div",{staticClass:"text itemxxxxx"},[o("p",[o("span",[t._v("状态:")]),t._v("\n      "+t._s(t.Data.MSSOStateStr)+"\n    ")])]),t._v(" "),o("div",{staticClass:"segmentation"},[t._v("物流")]),t._v(" "),o("el-input",{staticStyle:{width:"400px",marginTop:"10px",float:"right"},attrs:{placeholder:"",size:"mini"},model:{value:t.GoodsDH,callback:function(e){t.GoodsDH=e},expression:"GoodsDH"}},[o("template",{slot:"prepend"},[t._v("物流信息:")])],2),t._v(" "),o("el-table",{staticStyle:{width:"100%",marginTop:"10px",float:"left"},attrs:{data:t.GoosDtos,size:"mini",height:this.$store.state.TableOptimumHeight,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[o("el-table-column",{attrs:{fixed:"",prop:"Brand",label:"品牌",width:"150"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"",prop:"ProductCode",label:"内部编码","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{attrs:{fixed:"",prop:"ProDesc",label:"产品描述",width:"100"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"",prop:"Delivered",label:"已发数量",width:"80"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"",prop:"Quantity",label:"订单数量",width:"80"}}),t._v(" "),t._l(t.LogisticDtos,function(e,s){return o("el-table-column",{key:s,attrs:{fixed:"",label:"物流",width:"100",prop:t.NumberIndex(s)}},[o("template",{slot:"header"},[o("p",{on:{click:function(e){return t.DeliverysHttp(s)}}},[t._v(t._s("物流"+(s+1)))])])],2)}),t._v(" "),o("el-table-column",{attrs:{fixed:"",label:"发货",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini"},model:{value:e.row.index,callback:function(o){t.$set(e.row,"index",o)},expression:"scope.row.index"}})]}}])})],2),t._v(" "),o("el-button",{staticClass:"C33",attrs:{size:"mini",type:"primary"},on:{click:t.deliverGoods}},[t._v("发货")])],1)},staticRenderFns:[]};var a=o("VU/8")(s,i,!1,function(t){o("hTCv")},"data-v-e3fc51e0",null);e.default=a.exports}});