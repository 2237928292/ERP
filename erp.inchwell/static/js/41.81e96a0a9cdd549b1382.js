webpackJsonp([41],{AL2L:function(t,e){},s7IH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{Data:[],total:0,pagesize:10,pageNum:1,search:"",type:"",state:"",types:[{label:"工程师App",value:1,index:1},{label:"客户端App",value:2,index:2},{label:"电脑端网站",value:3,index:3},{label:"其它",value:4,index:4}],status:[{label:"等待审核",value:1,index:1},{label:"已审核",value:2,index:2},{label:"研发中",value:3,index:3},{label:"已完成",value:4,index:4},{label:"未采纳",value:5,index:5}],diaing:!1,diaingSH:!1,UpdaterType:"",Content:"",SHitem:{}}},created:function(){this.init()},methods:{init:function(){var t=this,e={api:"get",url:this.$store.state.http+"System/GetITUpdaterRec",data:{search:this.search,type:this.type,state:this.state,pageNum:this.pageNum,numPerPage:this.pagesize,orderField:"",orderDirection:""}};this.$https(e).then(function(e){t.total=e.Data.DataBars,t.Data=e.Data.Dtos;for(var a=0;a<t.Data.length;a++)t.Data[a].CreateDate=t.Data[a].CreateDate.split("T")[0],null!=t.Data[a].BeginDate?t.Data[a].BeginDate=t.Data[a].BeginDate.split("T")[0]:t.Data[a].BeginDate="   -   -",null!=t.Data[a].CompleteDate?t.Data[a].CompleteDate=t.Data[a].CompleteDate.split("T")[0]:t.Data[a].CompleteDate="   -   -";console.log(e.Data.Dtos)})},sele:function(){console.log(this.type)},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){t(),e.deleteadddata()}).catch(function(t){})},handleCloseSH:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},deleteadddata:function(){this.Content="",this.UpdaterType="",this.diaing=!1},addtrue:function(){var t=this;if(""==this.UpdaterType)return this.$msgs("1","请选择类型"),!1;if(""==this.Content)return this.$msgs("1","请输入内容"),!1;var e={api:"post",url:this.$store.state.http+"System/MakeSuggestion",data:{Content:this.Content,UpdaterType:this.UpdaterType}};this.$https(e).then(function(e){t.$msgs("0","我们将会尽快审核"),t.deleteadddata(),t.init()})},SHContent:function(t){this.diaingSH=!0,this.SHitem=t},Shtrue:function(t,e){var a=this;if(2==t&&2==e)this.$prompt("请输入拒绝原因","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var n=i.value,l={api:"post",url:a.$store.state.http+"System/UpdateSuggestion",data:{Id:a.SHitem.ID,Adopt:t,ToBeState:e,RefuseMsg:n}};a.$https(l).then(function(t){a.diaingSH=!1,a.init()})}).catch(function(){a.$message({type:"info",message:"未审核"})});else{var i={api:"post",url:this.$store.state.http+"System/UpdateSuggestion",data:{Id:this.SHitem.ID,Adopt:t,ToBeState:e}};this.$https(i).then(function(t){a.diaingSH=!1,a.init()})}},handleCurrentChange:function(t){this.pageNum=t,this.init()},handleSizeChange:function(t){this.pagesize=t,this.init()}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"TopSerch"},[a("el-input",{staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入内容",clearable:""},on:{change:function(e){return t.init()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择类型",clearable:""},on:{change:function(e){return t.init()}},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.types,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"mini",placeholder:"请选择状态",clearable:""},on:{change:function(e){return t.init()}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.status,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.init()}}},[t._v("检索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(e){t.diaing=!0}}},[t._v("添加")]),t._v(" "),a("el-dialog",{attrs:{title:"提出意见",visible:t.diaing,"before-close":t.handleClose},on:{"update:visible":function(e){t.diaing=e}}},[a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择意见类型"},model:{value:t.UpdaterType,callback:function(e){t.UpdaterType=e},expression:"UpdaterType"}},t._l(t.types,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),a("el-input",{staticStyle:{marginTop:"20px"},attrs:{type:"textarea","min-height":"30px",autosize:{minRows:2,maxRows:8},placeholder:"请输入内容"},model:{value:t.Content,callback:function(e){t.Content=e},expression:"Content"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.deleteadddata()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.addtrue()}}},[t._v("确 定")])],1)],1)],1),t._v(" "),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data,size:"mini",height:this.$store.state.TableOptimumHeight,"highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{fixed:"",prop:"Creater",label:"提议者",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"Content",label:"意见"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdaterStateStr",label:"意见状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"UpdaterTypeStr",label:"意见类型",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"提议时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"BeginDate",label:"开始时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CompleteDate",label:"完成时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"审核",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button-group",[1==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("审核")]):t._e(),t._v(" "),2==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("开始研发")]):t._e(),t._v(" "),3==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("完成")]):t._e(),t._v(" "),4==e.row.UpdaterState||5==e.row.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.SHContent(e.row)}}},[t._v("查看")]):t._e()],1)]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"审核意见",visible:t.diaingSH,"before-close":t.handleCloseSH},on:{"update:visible":function(e){t.diaingSH=e}}},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini",disabled:!0},model:{value:t.SHitem.Creater,callback:function(e){t.$set(t.SHitem,"Creater",e)},expression:"SHitem.Creater"}},[a("template",{slot:"prepend"},[t._v("提议者:")])],2),t._v(" "),a("span",{staticStyle:{"line-height":"30px","font-size":"13px"}},[t._v("意见详情：")]),t._v(" "),a("el-input",{staticStyle:{marginTop:"0px"},attrs:{type:"textarea","min-height":"30px",autosize:{minRows:2,maxRows:8},placeholder:"请输入内容",disabled:!0},model:{value:t.SHitem.Content,callback:function(e){t.$set(t.SHitem,"Content",e)},expression:"SHitem.Content"}}),t._v(" "),null!=t.SHitem.RefuseMsg?a("span",{staticStyle:{"line-height":"30px","font-size":"13px"}},[t._v("拒绝原因：")]):t._e(),t._v(" "),null!=t.SHitem.RefuseMsg?a("el-input",{staticStyle:{marginTop:"0px"},attrs:{type:"textarea","min-height":"30px",autosize:{minRows:2,maxRows:8},placeholder:"请输入内容",disabled:!0},model:{value:t.SHitem.RefuseMsg,callback:function(e){t.$set(t.SHitem,"RefuseMsg",e)},expression:"SHitem.RefuseMsg"}}):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.diaingSH=!1}}},[t._v("取 消")]),t._v(" "),1==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.Shtrue(2,2)}}},[t._v("审核不通过")]):t._e(),t._v(" "),1==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.Shtrue(1,2)}}},[t._v("审核通过")]):t._e(),t._v(" "),2==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.Shtrue(1,3)}}},[t._v("开始研发")]):t._e(),t._v(" "),3==t.SHitem.UpdaterState?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.Shtrue(1,4)}}},[t._v("完成")]):t._e()],1)],1),t._v(" "),a("nav",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":this.$store.state.Vuex.pageSNumber,"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(t){a("AL2L")},null,null);e.default=l.exports}});