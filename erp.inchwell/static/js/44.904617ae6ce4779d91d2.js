webpackJsonp([44],{"S+7K":function(t,e){},o0NN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Xu46");var o={data:function(){return{ToolObjectId:"",ToolProId:"",Selectcontact:"",ContractNo:"",company:"",ContractType:"",formLabelAlign:{Name:"",Mobile:"",NameEn:""},options:[{label:"技术公司",value:"技术公司",index:2},{label:"服务公司",value:"服务公司",index:3}],optionss:[{label:"AS",value:"AS",index:2},{label:"MC",value:"MC",index:3}]}},created:function(){var t=this.$store.state.Vuex.CusId;"010101"!=t&&(this.ToolProId=t.split("010101")[0],this.ToolObjectId=t.split("010101")[1])},methods:{submitForm:function(){return""===this.ToolProId?(this.$look("warning","警告！","请选择客户！"),!1):""===this.formLabelAlign.Name?(this.$look("warning","警告！","请补全联系人！"),!1):""===this.formLabelAlign.NameEn?(this.$look("warning","警告！","请补全联系人英文名！"),!1):""===this.formLabelAlign.Mobile?(this.$look("warning","警告！","请补全联系人手机号！"),!1):""===this.ContractNo?(this.$look("warning","警告！","请输入合同编号！"),!1):""===this.company?(this.$look("warning","警告！","请选择隶属公司！"),!1):""===this.ContractType?(this.$look("warning","警告！","请选择合同类型！"),!1):this.ContractNo.substring(this.ContractNo.length-2)!=this.ContractType?(this.$look("warning","警告！","合同编号与合同类型不符！"),!1):void("010101"!=this.$store.state.Vuex.CusId?this.CopyMaintain():this.CreateMC())},CopyMaintain:function(){var t=this,e=this.$store.state.Vuex.CusId,a={api:"post",url:this.$store.state.http+"Maintain/CopyMaintain",data:{OldMaintainId:e.split("010101")[2],CusId:this.ToolProId,LinkMan:this.formLabelAlign.Name,LinkManEngilsh:this.formLabelAlign.NameEn,Mobile:this.formLabelAlign.Mobile,Belong:this.company,ConrtractType:this.ContractType,MaintainCode:this.ContractNo}};this.$https(a).then(function(e){console.log(e),t.$emit("refresh"),t.$router.push({path:"/MaintenanceManagement"})})},CreateMC:function(){var t=this,e={api:"post",url:this.$store.state.http+"Maintain/CreateMC",data:{CusId:this.ToolProId,LinkMan:this.formLabelAlign.Name,LinkManEngilsh:this.formLabelAlign.NameEn,Mobile:this.formLabelAlign.Mobile,Belong:this.company,ConrtractType:this.ContractType,MaintainCode:this.ContractNo}};this.$https(e).then(function(e){console.log(e),t.$emit("refresh"),t.$router.push({path:"/MaintenanceManagement"})})},querySearchs:function(t,e){if(""==this.ToolProId)return console.log("0000bj"),!1;var a={data:{cusId:this.ToolProId},api:"get",url:this.$store.state.http+"CRM/GetCusLinkManMini",header:this.$store.state.token};this.$https(a).then(function(t){console.log(t.Data.Dtos);if(0==t.Data.Dtos.length)return e([]),!1;for(var a=0;a<t.Data.Dtos.length;a++)t.Data.Dtos[a].value=t.Data.Dtos[a].Name;e(t.Data.Dtos)})},querySearch:function(t,e){if(console.log(t),void 0==t)return t="",!1;""==t&&(t="北京");var a={data:{search:t},api:"get",url:this.$store.state.http+"CRM/GetCustomerMini",header:this.$store.state.token};this.$https(a).then(function(t){console.log(t.Data.Dtos);if(0==t.Data.Dtos.length)return e([]),!1;for(var a=0;a<t.Data.Dtos.length;a++)t.Data.Dtos[a].value=t.Data.Dtos[a].FullName;e(t.Data.Dtos)})},handleSelects:function(t){this.formLabelAlign=t},handleSelect:function(t){null!=t.ImageUrl?this.StoreHttp=this.$store.state.Filehttp+"CusTool/"+t.ImageUrl:this.StoreHttp="",this.item=[],this.item[0]=t,this.ToolProId=t.CusId,console.log(this.ToolProId),this.Selectcontact="",this.formLabelAlign={Name:"",Email:"",Tel:"",LinkManId:"",Address:"",Default:"",Mobile:"",NameEn:""}}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s  managementHTbox_s"},[a("div",{staticClass:"select"},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"350px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearch,placeholder:"请选择客户",clearable:""},on:{select:t.handleSelect},model:{value:t.ToolObjectId,callback:function(e){t.ToolObjectId=e},expression:"ToolObjectId "}},[a("template",{slot:"prepend"},[t._v("选择客户")])],2)],1),t._v(" "),a("div",{staticClass:"select"},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"350px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearchs,placeholder:"请选择联系人",clearable:""},on:{select:t.handleSelects},model:{value:t.Selectcontact,callback:function(e){t.Selectcontact=e},expression:"Selectcontact "}},[a("template",{slot:"prepend"},[t._v("联 系 人")])],2)],1),t._v(" "),a("div",{staticClass:"select"},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入英文名",prop:"Mobile",size:"mini"},model:{value:t.formLabelAlign.NameEn,callback:function(e){t.$set(t.formLabelAlign,"NameEn",e)},expression:"formLabelAlign.NameEn"}},[a("template",{slot:"prepend"},[t._v("英 文 名")])],2)],1),t._v(" "),a("div",{staticClass:"select"},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入手机",prop:"Mobile",size:"mini"},model:{value:t.formLabelAlign.Mobile,callback:function(e){t.$set(t.formLabelAlign,"Mobile",e)},expression:"formLabelAlign.Mobile"}},[a("template",{slot:"prepend"},[t._v("手   机")])],2)],1),t._v(" "),a("div",{staticClass:"select"},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入合同编号",prop:"Mobile",size:"mini"},model:{value:t.ContractNo,callback:function(e){t.ContractNo=e},expression:"ContractNo"}},[a("template",{slot:"prepend"},[t._v("合同编号")])],2)],1),t._v(" "),a("div",{staticClass:"select"},[a("span",[t._v("隶属公司：")]),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择隶属公司",clearable:""},model:{value:t.company,callback:function(e){t.company=e},expression:"company"}},t._l(t.options,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"select"},[a("span",[t._v("合同类型：")]),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择合同类型",clearable:""},model:{value:t.ContractType,callback:function(e){t.ContractType=e},expression:"ContractType"}},t._l(t.optionss,function(t){return a("el-option",{key:t.index,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("div",{staticClass:"bottom_but"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.submitForm()}}},[t._v("立即创建")])],1)])},staticRenderFns:[]};var l=a("VU/8")(o,i,!1,function(t){a("S+7K")},"data-v-70d3013e",null);e.default=l.exports}});