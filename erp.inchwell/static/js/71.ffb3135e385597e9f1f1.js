webpackJsonp([71],{LGDr:function(t,e){},p7qr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("mvHQ"),i=a.n(l),n=a("a52U"),o=a.n(n),s={data:function(){return{GetInchwell:{pageNum:1,numPerPage:10,orderField:"",orderDirection:"",province:"",role:"",name:""},total:0,citys:o.a,Provinces:[],Roles:[],Employ:[],data:[],dialogTableVisible:!1,CJData:{Name:"",province:"",Role:"",Mobile:"",Tel:"",Other:""},EditandAdd:!0}},computed:{},watch:{},methods:{handleCurrentChange:function(t){this.GetInchwell.pageNum=t,this.initData()},handleSizeChange:function(t){this.GetInchwell.numPerPage=t,this.initData()},initData:function(t){var e=this;1==t&&(this.GetInchwell.pageNum=1);var a={api:"get",url:this.$store.state.http+"System/GetInchwellLMs",data:this.GetInchwell};this.$https(a).then(function(t){e.total=t.Data.DataBars,e.data=t.Data.Dtos;for(var a=0;a<e.data.length;a++)for(var l=e.data[a],i=0;i<e.Provinces.length;i++){var n=e.Provinces[i];l.Province==n.key&&(l.Provincelabel=n.value)}console.log(e.data)})},init:function(){var t=this;this.Provinces=[];for(var e=0;e<this.citys.length;e++)this.Provinces.push({value:this.citys[e].label,key:this.citys[e].value});var a={api:"get",url:this.$store.state.http+"System/GetRoles",data:{one:""}};this.$https(a).then(function(e){t.Roles=e.Data});a={api:"get",url:this.$store.state.http+"System/GetEmployeeMini",data:{type:3}};this.$https(a).then(function(e){t.Employ=e.Data;for(var a=0;a<t.Employ.length;a++)t.Employ[a].value=t.Employ[a].Name;console.log(t.Employ)})},selectGroup:function(t){console.log(t),this.GetInchwell.province=t.key},querySearch:function(t,e){if(void 0==t||""==t)return e(this.Provinces);for(var a=t,l=this.Provinces,i=[],n=0;n<l.length;n++){var o=l[n];-1!=o.value.indexOf(a)&&i.push(o)}e(i)},selectGroups:function(t){console.log(t),this.GetInchwell.name=t.value},querySearchname:function(t,e){if(void 0==t||""==t)return e(this.Employ);for(var a=t,l=this.Employ,i=[],n=0;n<l.length;n++){var o=l[n];-1!=o.value.indexOf(a)&&i.push(o)}e(i)},selectGroupsCJ:function(t){console.log(t),this.CJData=t},selectGroupCJ:function(t){console.log(t),this.CJData.province=t.key},querySearchRole:function(t,e){for(var a=[],l=0;l<this.Roles.length;l++)a.push({value:this.Roles[l].Name});if(void 0==t||""==t)return e(a);for(var i=t,n=a,o=[],s=0;s<n.length;s++){var r=n[s];-1!=r.value.indexOf(i)&&o.push(r)}e(o)},AddOrder:function(){var t=this;if(""==this.CJData.Name||null==this.CJData.Name)return this.$look("warning","请选择员工！"),!1;if(""==this.CJData.Province||null==this.CJData.Province)return this.$look("warning","请选择省份！"),!1;if(""==this.CJData.Role||null==this.CJData.Role)return this.$look("warning","请选择角色！"),!1;if(""==this.CJData.Mobile||null==this.CJData.Mobile)return this.$look("warning","请输入手机号！"),!1;if(""==this.CJData.Tel||null==this.CJData.Tel)return this.$look("warning","请输入座机号！"),!1;if(this.EditandAdd)var e={api:"post",url:this.$store.state.http+"System/AddInchwellLM",data:this.CJData};else e={api:"post",url:this.$store.state.http+"System/UpdateInchwellLM",data:this.CJData};this.$https(e).then(function(e){console.log(e),t.delCJData(),t.initData()})},delCJData:function(){this.CJData={},this.nameCJ="",this.provinceCJ="",this.dialogTableVisible=!1},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){t(),e.delCJData()}).catch(function(t){})},Edit:function(t){this.CJData=JSON.parse(i()(t)),console.log(this.CJData),this.EditandAdd=!1,this.dialogTableVisible=!0}},created:function(){this.init(),this.initData()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("div",{staticClass:"TopSerch"},[a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择省份",clearable:""},on:{change:function(e){return t.initData(1)}},model:{value:t.GetInchwell.province,callback:function(e){t.$set(t.GetInchwell,"province",e)},expression:"GetInchwell.province"}},t._l(t.Provinces,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.key,clearable:""}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请选择角色",clearable:""},on:{change:function(e){return t.initData(1)}},model:{value:t.GetInchwell.role,callback:function(e){t.$set(t.GetInchwell,"role",e)},expression:"GetInchwell.role"}},t._l(t.Roles,function(t){return a("el-option",{key:t.Name,attrs:{label:t.Name,value:t.Name}})}),1),t._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"150px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearchname,placeholder:"请选择姓名",clearable:""},on:{input:function(e){return t.initData(1)},select:t.selectGroups},model:{value:t.GetInchwell.name,callback:function(e){t.$set(t.GetInchwell,"name",e)},expression:"GetInchwell.name"}}),t._v(" "),a("el-button",{attrs:{type:"primary",loading:this.$store.state.Vuex.loading,size:"mini"},on:{click:function(e){return t.initData(1)}}},[t._v("检索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:function(e){t.dialogTableVisible=!0,t.EditandAdd=!0}}},[t._v("创建")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,height:this.$store.state.TableOptimumHeight,size:"mini","highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"Name",label:"姓名",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Role",label:"角色",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Provincelabel",label:"省份",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Mobile",label:"手机号",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Tel",label:"座机",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Other",label:"备注","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.Edit(e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"添加联系人",visible:t.dialogTableVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"dial",staticStyle:{width:"100%",height:"350px"}},[a("div",{staticClass:"li"},[a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"300px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearchname,placeholder:"选择员工",clearable:""},on:{select:t.selectGroupsCJ},model:{value:t.CJData.Name,callback:function(e){t.$set(t.CJData,"Name",e)},expression:"CJData.Name"}},[a("template",{slot:"prepend"},[t._v("选择员工")])],2)],1),t._v(" "),a("div",{staticClass:"li"},[a("div",{staticClass:"liLefttext"},[t._v("选择省份")]),t._v(" "),a("el-select",{staticStyle:{width:"209px"},attrs:{size:"mini",placeholder:"请选择省份",clearable:""},model:{value:t.CJData.Province,callback:function(e){t.$set(t.CJData,"Province",e)},expression:"CJData.Province"}},t._l(t.Provinces,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.key}})}),1)],1),t._v(" "),a("div",{staticClass:"li"},[a("div",{staticClass:"liLefttext"},[t._v("选择角色")]),t._v(" "),a("el-select",{staticStyle:{width:"209px"},attrs:{size:"mini",placeholder:"请选择角色",clearable:""},model:{value:t.CJData.Role,callback:function(e){t.$set(t.CJData,"Role",e)},expression:"CJData.Role"}},t._l(t.Roles,function(t){return a("el-option",{key:t.Name,attrs:{label:t.Name,value:t.Name}})}),1)],1),t._v(" "),a("div",{staticClass:"li"},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入手机号",size:"mini"},model:{value:t.CJData.Mobile,callback:function(e){t.$set(t.CJData,"Mobile",e)},expression:"CJData.Mobile"}},[a("template",{slot:"prepend"},[t._v("手机号")])],2)],1),t._v(" "),a("div",{staticClass:"li"},[a("el-input",{staticStyle:{width:"400px"},attrs:{placeholder:"请输入座机",size:"mini"},model:{value:t.CJData.Tel,callback:function(e){t.$set(t.CJData,"Tel",e)},expression:"CJData.Tel"}},[a("template",{slot:"prepend"},[t._v("座机号")])],2)],1),t._v(" "),a("div",{staticClass:"li"},[a("el-input",{staticStyle:{float:"left",width:"500px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"备注"},model:{value:t.CJData.Other,callback:function(e){t.$set(t.CJData,"Other",e)},expression:"CJData.Other"}})],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.delCJData()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.AddOrder()}}},[t._v("确 定")])],1)]),t._v(" "),a("nav",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":this.$store.state.Vuex.pageSNumber,"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,r,!1,function(t){a("LGDr")},"data-v-4a5d6280",null);e.default=c.exports}});