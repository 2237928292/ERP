webpackJsonp([83],{Uy4N:function(t,e){},e1CC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"",data:function(){return{options:[{Name:"全部",ID:0,value:0},{Name:"申请中",ID:0,value:1},{Name:"已受理",ID:0,value:2},{Name:"已结单",ID:0,value:3},{Name:"已撤单",ID:0,value:4}],pageNum:1,pagesize:10,search:"",state:0,total:0,Area:"",data:[],Brand:"",cusType:""}},created:function(){this.initdata(),this.Manufacturer()},components:{},methods:{initdata:function(t){var e=this;1==t&&(this.pageNum=1);var a={url:this.$store.state.http+"WO/GetRepareMinis",api:"get",data:{search:this.search,state:this.state,Area:this.Area,Brand:this.Brand,cusType:this.cusType,pageNum:this.pageNum,numPerPage:this.pagesize,orderField:"",orderDirection:""}};this.$https(a).then(function(t){console.log(t.Data.Dtos),e.data=t.Data.Dtos;for(var a=0;a<e.data.length;a++){var i=e.data[a];console.log(i),i.CreateDate=i.CreateDate.split("T")[0],i.AcceptanceDate&&(i.AcceptanceDate=i.AcceptanceDate.split("T")[0])}e.total=t.Data.DataBars})},Statement:function(t){var e=this;if(t.IsOverRequest&&12!=t.Status&&38!=t.Status&&21!=t.Status)var a="WO/FinishRequest";else a="WO/CancelFinishRequest";var i={api:"post",url:this.$store.state.http+a,data:{Id:t.RepairId}};this.$https(i).then(function(t){e.$look("success","成功！","操作成功！"),e.initdata()})},querySearch:function(t,e){if(void 0==t)return t="",e(this.Optios),!1;if(""==t)return e(this.Optios),!1;for(var a=t,i=this.Optios,n=[],s=(a.split("")[0],0);s<i.length;s++){var r=i[s];-1!=r.value.indexOf(a)&&n.push(r)}e(n)},Manufacturer:function(){var t=this,e={url:this.$store.state.http+"System/GetBrand",api:"get"};this.$https(e).then(function(e){t.Optios=e.Data;for(var a=0;a<t.Optios.length;a++)t.Optios[a].value=t.Optios[a].Value;console.log(t.Optios)})},handleCurrentChange:function(t){this.pageNum=t,this.initdata()},handleSizeChange:function(t){this.pagesize=t,this.initdata()},IWantBX:function(){this.$router.push({path:"/IWantRepair"})},Edit:function(t){this.$store.state.Vuex.Id=t.RepairId,this.$router.push({path:"/RepairDetails"})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("router-view"),t._v(" "),a("div",{staticClass:"TopSerch"},[a("el-input",{staticStyle:{width:"210px"},attrs:{size:"mini",placeholder:"请输入客户名称、设备描述、单号"},on:{change:function(e){return t.initdata(1)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"请选择状态"},on:{change:function(e){return t.initdata(1)}},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.Name,value:t.value}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{clearable:"",size:"mini",placeholder:"请选择区域"},on:{change:function(e){return t.initdata(1)}},model:{value:t.Area,callback:function(e){t.Area=e},expression:"Area"}},t._l(this.$store.state.Vuex.Area,function(t){return a("el-option",{key:t.Value,attrs:{label:t.Value,value:t.Value}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",clearable:"",placeholder:"请选择客户类型"},on:{change:function(e){return t.initdata(1)}},model:{value:t.cusType,callback:function(e){t.cusType=e},expression:"cusType"}},t._l(this.$store.state.Vuex.CustomerTypes,function(t){return a("el-option",{key:t+"2",attrs:{label:t,value:t}})}),1),t._v(" "),a("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"200px"},attrs:{size:"mini","show-overflow-tooltip":!0,"fetch-suggestions":t.querySearch,placeholder:"请选择品牌",clearable:""},on:{input:function(e){return t.initdata(1)}},model:{value:t.Brand,callback:function(e){t.Brand=e},expression:"Brand"}}),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",size:"mini"},on:{click:t.IWantBX}},[t._v("我要报修")]),t._v(" "),a("el-button",{staticStyle:{float:"right",margin:"0 30px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.initdata()}}},[t._v("检索")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,height:this.$store.state.TableOptimumHeight,size:"mini","highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{prop:"RepairCode",label:"报修单号",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"CusName",label:"客户名称",width:"230"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ProductCode",label:"设备型号",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Desc",label:"设备描述","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"CreateDate",label:"创建日期",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"AcceptanceDate",label:"受理时间",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"StatusStr",label:"状态",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.Edit(e.row)}}},[t._v("处理")]),t._v(" "),12==e.row.Status||38==e.row.Status||21==e.row.Status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.Statement(e.row)}}},[t._v("取消结单")]):t._e(),t._v(" "),e.row.IsOverRequest&&12!=e.row.Status&&38!=e.row.Status&&21!=e.row.Status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.Statement(e.row)}}},[t._v("结单")]):t._e()]}}])})],1),t._v(" "),a("nav",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":1,"page-sizes":this.$store.state.Vuex.pageSNumber,"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(t){a("Uy4N")},"data-v-2c8d9cba",null);e.default=s.exports}});