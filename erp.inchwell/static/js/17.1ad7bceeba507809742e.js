webpackJsonp([17],{aMFx:function(t,e){},qliR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("Xu46");var s=a("PXCl").Base64,i={name:"",data:function(){return{col:[{label:"序号",prop:"Pos",width:"80"},{label:"设备编码",prop:"ProductCode",width:"150"},{label:"品牌",prop:"Brand",width:"150"},{label:"描述",prop:"Desc",width:"",widths:!0},{label:"数量",prop:"Number",width:"80"},{label:"序列号",prop:"SN",width:"150"}],dropCol:[{label:"序号",prop:"Pos",width:"80"},{label:"设备编码",prop:"ProductCode",width:"150"},{label:"品牌",prop:"Brand",width:"150"},{label:"描述",prop:"Desc",width:"",widths:!0},{label:"数量",prop:"Number",width:"80"},{label:"序列号",prop:"SN",width:"150"}],Data:[],EquDtos1:[],StateStr:"",GetMCPlistDataList:0,reverse:!0,GetMCPlistData:[],MCOrderDtos:[],ASMC:"",PreferentialAmountSD:0}},filters:{TimeCode:function(t){return null==t||void 0==t||""==t?" - - ":t.split("T")[0]}},mounted:function(){this.initMaintenan(),this.GetMCPlist()},methods:{initMaintenan:function(){var t=this,e={url:this.$store.state.http+"Maintain/GetMC",api:"get",data:{Id:this.$store.state.Vuex.MaintenanceContractDetailsID}};this.$https(e).then(function(e){console.log(e.Data),t.Data=e.Data,t.EquDtos1=e.Data.MCEquInfo.EquDtos,t.StateStr=e.Data.MCBaseInfo.State,t.MCOrderDtos=e.Data.MCOrderDtos,t.ASMC=t.Data.MCBaseInfo.ContractType.substring(4,6),"服务公司AS"==e.Data.MCBaseInfo.ContractType||"技术公司AS"==e.Data.MCBaseInfo.ContractType?t.PreferentialAmountSD=e.Data.ASEquInfo.ASPreferentialAmount+e.Data.MCEquInfo.TravelExpenses*e.Data.MCEquInfo.TraveTime:t.PreferentialAmountSD=e.Data.MCEquInfo.PreferentialAmount+e.Data.MCEquInfo.TravelExpenses*e.Data.MCEquInfo.TraveTime})},
//! 获取收款记录
GetMCPlist:function(){var t=this,e={api:"GET",url:this.$store.state.http+"maintain/GetMCPlist",data:{id:this.$store.state.Vuex.MaintenanceContractDetailsID}};this.$https(e).then(function(e){t.GetMCPlistData=e.Data,t.GetMCPlistDataList=0;for(var a=0;a<t.GetMCPlistData.length;a++){var s=t.GetMCPlistData[a];t.GetMCPlistDataList+=s.Amount}})},httpTXFWQBYHT:function(t){if("MC"==t||"AS"==t){var e=this.$router.resolve({path:this.$store.state.Vuex.TencentServer+"/AS&MC/"+t+".html",query:{url:s.encodeURI(this.$store.state.http+"Maintain/GetMaintainContract"),ID:s.encodeURI(this.$store.state.Vuex.MaintenanceContractDetailsID),token:s.encodeURI(localStorage.getItem("token"))}}).href;window.open(e.slice(2),"_blank")}else if("ASs"==t){var a=this.$router.resolve({path:this.$store.state.Vuex.TencentServer+"/AS&MC/"+t+".html",query:{url:s.encodeURI(this.$store.state.http+"Maintain/GetMCYu"),ID:s.encodeURI(this.$store.state.Vuex.MaintenanceContractDetailsID),token:s.encodeURI(localStorage.getItem("token"))}}).href;window.open(a.slice(2),"_blank")}else{var i=this.$router.resolve({path:this.$store.state.Vuex.TencentServer+"/AS&MC/"+t+".html",query:{url:s.encodeURI(this.$store.state.http+"Maintain/GetMCAppendix"),ID:s.encodeURI(this.$store.state.Vuex.MaintenanceContractDetailsID),token:s.encodeURI(localStorage.getItem("token"))}}).href;window.open(i.slice(2),"_blank")}}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_s"},[t.Data.MCBaseInfo?a("div",[a("div",{staticClass:"segmentation"},[t._v("保养合同基础信息 【 "+t._s(t.Data.MCBaseInfo.MaintainCode)+" 】")]),t._v(" "),a("div",{staticClass:"itemmsgxx_document",staticStyle:{width:"600px"}},[a("p",[a("span",[t._v("客户名称:")]),t._v(t._s(t.Data.MCBaseInfo.CusFullName))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("合同类型:")]),t._v(t._s(t.Data.MCBaseInfo.ContractType))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("合同号:")]),t._v(t._s(t.Data.MCBaseInfo.MaintainCode))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("区域:")]),t._v(t._s(t.Data.MCBaseInfo.Area))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("设备数量:")]),t._v(t._s(t.Data.MCBaseInfo.EquCount))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("创建日期:")]),t._v(t._s(t._f("TimeCode")(t.Data.MCBaseInfo.CreateDate)))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("报价日期:")]),t._v(t._s(t._f("TimeCode")(t.Data.MCBaseInfo.AcceptDate)))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("付款日期:")]),t._v(t._s(t._f("TimeCode")(t.Data.MCBaseInfo.PayDate)))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("结单日期:")]),t._v(t._s(t._f("TimeCode")(t.Data.MCBaseInfo.EndDate)))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("销售员:")]),t._v(t._s(t.Data.MCBaseInfo.SalesPerson))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("当前状态:")]),t._v(t._s(t.Data.MCBaseInfo.StateStr))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("联系人:")]),t._v(t._s(t.Data.MCBaseInfo.LinkMan))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("联系人英文名:")]),t._v(t._s(t.Data.MCBaseInfo.LinkManEngilsh))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v(" 联系人手机号:")]),t._v(t._s(t.Data.MCBaseInfo.Mobile))])]),t._v(" "),a("div",{staticClass:"itemmsgxX_document"},[a("p",[a("span",[t._v("备注信息:")]),t._v(t._s(t.Data.MCBaseInfo.Memo))])]),t._v(" "),a("div",{attrs:{id:"LEtetabe"}},[a("el-table",{attrs:{data:t.EquDtos1,border:"","row-key":"id",size:"mini","header-cell-style":{background:"#e1e1e1"},align:"left"}},t._l(t.col,function(e,s){return a("el-table-column",{key:"col_"+s,attrs:{prop:t.dropCol[s].prop,sortable:"",width:t.dropCol[s].width,"show-overflow-tooltip":t.dropCol[s].widths,label:e.label}})}),1)],1),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("合同年限:")]),t._v(t._s(t.Data.MCEquInfo.YearLife))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("保养次数:")]),t._v(t._s(t.Data.MCEquInfo.MaintainCount))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("总金额(RMB):")]),t._v(t._s(t.Data.MCEquInfo.AmountTotal))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("优惠后金额:")]),t._v(t._s(t.Data.MCEquInfo.PreferentialAmount))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("优惠比例:")]),t._v(t._s(t.Data.MCEquInfo.PreferentialRatio))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("差旅费:")]),t._v(t._s(t.Data.MCEquInfo.TravelExpenses))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("差旅费次数:")]),t._v(t._s(t.Data.MCEquInfo.TraveTime))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",{staticStyle:{width:"200px"}},[t._v("是否在合同中显示折扣率:")]),t._v(t._s(t.Data.MCEquInfo.IsShowDiscount?"显示":"不显示"))])]),t._v(" "),"服务公司AS"==t.Data.MCBaseInfo.ContractType||"技术公司AS"==t.Data.MCBaseInfo.ContractType?a("div",[a("div",{staticClass:"segmentation"},[t._v("大包设备信息")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.Data.ASEquInfo.EquDtos,size:"mini","highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{fixed:"",prop:"Pos",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"ProductCode",label:"设备编码",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"Brand",label:"品牌",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"Desc",label:"描述","show-overflow-tooltip":!0}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"Number",label:"数量",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"SN",label:"序列号",width:"150"}})],1),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",{staticStyle:{width:"200px"}},[t._v("AS金额合计 优惠前(RMB):")]),t._v(t._s(t.Data.ASEquInfo.ASAmountTotal))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("AS优惠后金额:")]),t._v(t._s(t.Data.ASEquInfo.ASPreferentialAmount))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("建店年份:")]),t._v(t._s(t.Data.ASEquInfo.YearOfEstablishment))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("举升机数量:")]),t._v(t._s(t.Data.ASEquInfo.TotalNumberOfLifts))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",{staticStyle:{width:"200px"}},[t._v("去年售后维修花费:")]),t._v(t._s(t.Data.ASEquInfo.QNHF))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("空压机数量:")]),t._v(t._s(t.Data.ASEquInfo.TotalNumberOfAirCompressor))])]),t._v(" "),a("div",{staticClass:"itemmsgxx_document"},[a("p",[a("span",[t._v("烤漆房数量:")]),t._v(t._s(t.Data.ASEquInfo.TotalNumberOfSprayBooth))])])],1):t._e(),t._v(" "),4==t.StateStr||5==t.StateStr||9==t.StateStr?a("div",{staticClass:"segmentation"},[t._v("收款记录\n      "),a("p",{staticStyle:{float:"right",color:"#000"}},[t._v(" (共计已收："+t._s(t.GetMCPlistDataList+" 元")+" )    ")]),t._v(" "),a("p",{staticStyle:{float:"right",color:"#000"}},[t._v(" (共计应收："+t._s(t.PreferentialAmountSD+" 元")+" )    ")])]):t._e(),t._v(" "),4==t.StateStr||5==t.StateStr||9==t.StateStr?a("div",{staticClass:"timeline"},[a("el-timeline",{attrs:{reverse:t.reverse}},t._l(t.GetMCPlistData,function(e,s){return a("el-timeline-item",{key:s,attrs:{timestamp:e.CreateDate.split("T")[0]}},[t._v("\n          "+t._s(e.Amount+" 元")+"\n        ")])}),1)],1):t._e(),t._v(" "),2==t.StateStr||3==t.StateStr||4==t.StateStr||5==t.StateStr||9==t.StateStr?a("div",{staticClass:"segmentation"},[t._v("下载合同")]):t._e(),t._v(" "),2==t.StateStr||3==t.StateStr||4==t.StateStr||5==t.StateStr||9==t.StateStr?a("div",{staticClass:"div",staticStyle:{width:"100%",float:"left"}},["MC"==t.ASMC?a("div",{staticClass:"Fl"},[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("MC")}}},[t._v("合同")]),t._v(" "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("MC2")}}},[t._v("附件2")])],1):t._e(),t._v(" "),"AS"==t.ASMC?a("div",{staticClass:"Fl"},[a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("ASs")}}},[t._v("AS预报价方案")]),t._v(" "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("AS")}}},[t._v("合同")]),t._v(" "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("AS2")}}},[t._v("附件2")]),t._v(" "),a("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.httpTXFWQBYHT("AS3")}}},[t._v("附件3")])],1):t._e()]):t._e(),t._v(" "),4==t.StateStr||5==t.StateStr||9==t.StateStr?a("div",{staticClass:"segmentation"},[t._v("任务列表")]):t._e(),t._v(" "),4==t.StateStr||5==t.StateStr||9==t.StateStr?a("div",{attrs:{id:"LEtetabes"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.MCOrderDtos,size:"mini","highlight-current-row":"",border:"","header-cell-style":{background:"#e1e1e1"}}},[a("el-table-column",{attrs:{fixed:"",prop:"EstimatedTime",label:"预计时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"ActualTime",label:"启动时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"EndTime",label:"完成时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"Enginners",label:"工程师",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"StateStr",label:"状态"}})],1)],1):t._e()]):t._e()])},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(t){a("aMFx")},"data-v-fde146c4",null);e.default=o.exports}});